---
- hosts: all
  gather_facts: true
  become:
    true
  become_user:
    root
  remote_user:
    centos


- hosts: db_master
  gather_facts: false
  become:
    true
  become_user:
    root
  remote_user:
    centos
  roles:
       - mysql-master


- hosts: db_slave
  become:
    true
  become_user:
    root
  remote_user:
    centos
  roles:
       - mysql-slave
     

- hosts: 
      app
  become:
    true
  become_user:
    root
  remote_user:
    centos
  roles:
     - nginx
     - wordpress

# - hosts: 
#       all
#   become:
#     true
#   become_user:
#     root
#   remote_user:
#     centos
#   roles:
#      - node-exporter

# - hosts: 
#     monitoring
#   become:
#    true
#   become_user:
#    root
#   remote_user:
#     centos
#   roles:
#    - prometheus
#    - alertmanager
#    - grafana

- hosts: 
    proxy
  become:
    true
  become_user:
    root
  remote_user:
    centos
  roles:
    - nginx-proxy
    # - letsencrypt